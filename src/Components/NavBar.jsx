import React, { useState, useEffect } from "react";
import "./Style/Navbar.css";
import Tooltip from "@mui/material/Tooltip";
import Zoom from "@mui/material/Zoom";
import styled from "@mui/material/styles/styled";
import { useNavigate } from "react-router-dom";
import { tooltipClasses } from "@mui/material/Tooltip";
import { Link } from "react-router-dom";

const Navbar = ({ showCreateNote, setisConect }) => {
  const [userName, setUserName] = useState(" loading ...");
  const [userLast, setLast] = useState("");


  const navigate = useNavigate();

  useEffect(() => {
    const storedName = localStorage.getItem("first");
    const storedlast = localStorage.getItem("last");
    if (storedName && storedlast) {
      setUserName(storedName);
      setLast(storedlast);
    }
  }, []);

  const handleLogout = () => {
    setisConect(false);
    localStorage.removeItem("authToken");
    localStorage.removeItem("first");
    localStorage.removeItem("last");
    navigate("/");
  };

  //for the tooltip of the edit and delete buttons in black color
  const TooltipBlack = styled(({ className, ...props }) => (
    <Tooltip {...props} arrow classes={{ popper: className }} />
  ))(({ theme }) => ({
    [`& .${tooltipClasses.arrow}`]: {
      color: theme.palette.common.black,
    },
    [`& .${tooltipClasses.tooltip}`]: {
      backgroundColor: theme.palette.common.black,
      fontFamily: '"Figtree", serif',
      fontSize: "12px",
      color: "white",
    },
  }));

  return (
    <nav className={showCreateNote ? "navbar-true" : "navbar-false"}>
      <div className="navbar-title">My Notes</div>
      <div className="navbar-username">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
        >
          <path
            opacity="0.5"
            d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"
            fill="#1C274C"
          />
          <path
            d="M16.807 19.0112C15.4398 19.9504 13.7841 20.5 12 20.5C10.2159 20.5 8.56023 19.9503 7.193 19.0111C6.58915 18.5963 6.33109 17.8062 6.68219 17.1632C7.41001 15.8302 8.90973 15 12 15C15.0903 15 16.59 15.8303 17.3178 17.1632C17.6689 17.8062 17.4108 18.5964 16.807 19.0112Z"
            fill="#1C274C"
          />
          <path
            d="M12 12C13.6569 12 15 10.6569 15 9C15 7.34315 13.6569 6 12 6C10.3432 6 9.00004 7.34315 9.00004 9C9.00004 10.6569 10.3432 12 12 12Z"
            fill="#1C274C"
          />
        </svg>
        {userName && userLast ? (
          <>
            {userName.charAt(0).toUpperCase() + userName.slice(1).toLowerCase()}{" "}
            {""}
            {userLast.charAt(0).toUpperCase() + userLast.slice(1).toLowerCase()}
          </>
        ) : (
          "Loading.d.."
        )}
        <TooltipBlack
          slots={{ transition: Zoom }}
          title="Developer !"
          placement="right"
          arrow
        >
          <svg
            style={{ cursor: "pointer" }}
            height="13"
            width="24"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
          >
            <g fill="none" fill-rule="evenodd">
              <path
                d="M256 472.153L176.892 512l-41.725-81.129-86.275-16.654 11.596-91.422L0 256l60.488-66.795-11.596-91.422 86.275-16.654L176.892 0 256 39.847 335.108 0l41.725 81.129 86.275 16.654-11.596 91.422L512 256l-60.488 66.795 11.596 91.422-86.275 16.654L335.108 512z"
                fill="#4285f4"
              />
              <path
                d="M211.824 284.5L171 243.678l-36 36 40.824 40.824-.063.062 36 36 .063-.062.062.062 36-36-.062-.062L376.324 192l-36-36z"
                fill="#fff"
              />
            </g>
          </svg>
        </TooltipBlack>
      </div>
      <TooltipBlack
        slots={{ transition: Zoom }}
        title="Settings ! "
        placement="left"
        arrow
      >
        <div className="navbar-menu">
          <button className="menu-button">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M16.75 4C16.75 5.51878 15.5188 6.75 14 6.75C12.4812 6.75 11.25 5.51878 11.25 4C11.25 2.48122 12.4812 1.25 14 1.25C15.5188 1.25 16.75 2.48122 16.75 4ZM14 5.25C14.6904 5.25 15.25 4.69036 15.25 4C15.25 3.30964 14.6904 2.75 14 2.75C13.3096 2.75 12.75 3.30964 12.75 4C12.75 4.69036 13.3096 5.25 14 5.25Z"
                fill="#1C274C"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12 14.75C10.4812 14.75 9.25 13.5188 9.25 12C9.25 10.4812 10.4812 9.25 12 9.25C13.5188 9.25 14.75 10.4812 14.75 12C14.75 13.5188 13.5188 14.75 12 14.75ZM10.75 12C10.75 12.6904 11.3096 13.25 12 13.25C12.6904 13.25 13.25 12.6904 13.25 12C13.25 11.3096 12.6904 10.75 12 10.75C11.3096 10.75 10.75 11.3096 10.75 12Z"
                fill="#1C274C"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10 22.75C8.48122 22.75 7.25 21.5188 7.25 20C7.25 18.4812 8.48122 17.25 10 17.25C11.5188 17.25 12.75 18.4812 12.75 20C12.75 21.5188 11.5188 22.75 10 22.75ZM8.75 20C8.75 20.6904 9.30964 21.25 10 21.25C10.6904 21.25 11.25 20.6904 11.25 20C11.25 19.3096 10.6904 18.75 10 18.75C9.30964 18.75 8.75 19.3096 8.75 20Z"
                fill="#1C274C"
              />
              <path
                d="M15.25 12C15.25 11.5858 15.5858 11.25 16 11.25H19C19.4142 11.25 19.75 11.5858 19.75 12C19.75 12.4142 19.4142 12.75 19 12.75H16C15.5858 12.75 15.25 12.4142 15.25 12Z"
                fill="#1C274C"
              />
              <path
                d="M14 19.25C13.5858 19.25 13.25 19.5858 13.25 20C13.25 20.4142 13.5858 20.75 14 20.75H19C19.4142 20.75 19.75 20.4142 19.75 20C19.75 19.5858 19.4142 19.25 19 19.25H14Z"
                fill="#1C274C"
              />
              <path
                d="M10.75 4C10.75 3.58579 10.4142 3.25 10 3.25L5 3.25C4.58579 3.25 4.25 3.58579 4.25 4C4.25 4.41421 4.58579 4.75 5 4.75L10 4.75C10.4142 4.75 10.75 4.41421 10.75 4Z"
                fill="#1C274C"
              />
              <path
                d="M5 11.25C4.58579 11.25 4.25 11.5858 4.25 12C4.25 12.4142 4.58579 12.75 5 12.75H8C8.41421 12.75 8.75 12.4142 8.75 12C8.75 11.5858 8.41421 11.25 8 11.25H5Z"
                fill="#1C274C"
              />
              <path
                d="M4.25 20C4.25 19.5858 4.58579 19.25 5 19.25H6C6.41421 19.25 6.75 19.5858 6.75 20C6.75 20.4142 6.41421 20.75 6 20.75H5C4.58579 20.75 4.25 20.4142 4.25 20Z"
                fill="#1C274C"
              />
              <path
                d="M19 3.25C19.4142 3.25 19.75 3.58579 19.75 4C19.75 4.41421 19.4142 4.75 19 4.75H18C17.5858 4.75 17.25 4.41421 17.25 4C17.25 3.58579 17.5858 3.25 18 3.25H19Z"
                fill="#1C274C"
              />
            </svg>
          </button>
          <div className="dropdown">
           
            <Link to="/updatepassword" className="dropdown-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M9.75684 1.98286C9.76631 2.39697 9.43829 2.74034 9.02418 2.74981C6.20248 2.81432 4.87348 3.09895 3.99627 3.97617C3.42588 4.54656 3.09862 5.31824 2.92655 6.59801C2.75159 7.89936 2.75 9.60936 2.75 11.99C2.75 14.3705 2.75159 16.0805 2.92655 17.3819C3.09862 18.6617 3.42588 19.4333 3.99627 20.0037C4.56666 20.5741 5.33834 20.9014 6.61811 21.0735C7.91946 21.2484 9.62946 21.25 12.0101 21.25C14.3906 21.25 16.1006 21.2484 17.402 21.0735C18.6818 20.9014 19.4534 20.5741 20.0238 20.0037C20.9011 19.1265 21.1857 17.7975 21.2502 14.9758C21.2597 14.5617 21.603 14.2337 22.0171 14.2432C22.4312 14.2526 22.7593 14.596 22.7498 15.0101C22.6866 17.7765 22.4374 19.7115 21.0845 21.0644C20.1889 21.9599 19.048 22.3657 17.6019 22.5601C16.189 22.75 14.3782 22.75 12.0674 22.75H11.9527C9.64191 22.75 7.8311 22.75 6.41824 22.5601C4.97214 22.3657 3.83115 21.9599 2.93561 21.0644C2.04006 20.1689 1.63435 19.0279 1.43993 17.5818C1.24998 16.1689 1.24999 14.3581 1.25 12.0473V11.9326C1.24999 9.62181 1.24998 7.811 1.43993 6.39814C1.63435 4.95204 2.04006 3.81105 2.93561 2.91551C4.2885 1.56262 6.22347 1.31345 8.98989 1.2502C9.404 1.24073 9.74737 1.56875 9.75684 1.98286ZM17.2606 2.75C15.0544 2.75 13.2711 4.53036 13.2711 6.72008C13.2711 7.21172 13.3839 7.64295 13.4996 7.95426C13.557 8.10864 13.6137 8.22949 13.6541 8.30858C13.6742 8.348 13.6901 8.37665 13.6997 8.39349L13.7091 8.40964C13.8944 8.70485 13.8506 9.08899 13.6037 9.33493L7.87005 15.0451C7.85527 15.0598 7.82684 15.0936 7.80049 15.1408C7.77466 15.1871 7.75916 15.2314 7.75308 15.2686C7.74754 15.3025 7.74952 15.3303 7.75842 15.358C7.76713 15.3852 7.79159 15.4409 7.87005 15.519L8.50421 16.1506C8.52318 16.1647 8.55267 16.184 8.59 16.2022C8.63879 16.2261 8.68606 16.2411 8.72624 16.2471C8.76432 16.2527 8.78981 16.2495 8.80787 16.2441C8.82312 16.2395 8.85657 16.2266 8.9057 16.1777L9.67724 15.4093C9.96988 15.1178 10.4431 15.1178 10.7357 15.4093C10.8507 15.5237 10.9465 15.5714 11.0148 15.5922C11.0838 15.6133 11.1522 15.6155 11.2227 15.602C11.379 15.5721 11.5211 15.4687 11.5865 15.386C11.677 15.2553 11.6741 15.1418 11.6308 15.0124C11.6067 14.9407 11.5721 14.876 11.5419 14.8284C11.5274 14.8055 11.5155 14.7892 11.5091 14.7808C11.5074 14.7785 11.5054 14.7759 11.5054 14.7759C11.2557 14.478 11.2748 14.0378 11.551 13.7627L11.7714 13.5432C12.0641 13.2518 12.5373 13.2518 12.8299 13.5432C13.2139 13.9256 13.4684 13.9208 13.591 13.8976C13.7642 13.8647 13.9255 13.7402 14.011 13.6301C14.1236 13.4689 14.1241 13.3249 14.0925 13.1925C14.0751 13.1199 14.0481 13.0565 14.0253 13.0119C14.0142 12.9903 14.0053 12.9753 14.0009 12.9683L13.9999 12.9668L13.9714 12.927L13.945 12.8744C13.9355 12.8554 13.9203 12.8325 13.8718 12.779C13.8702 12.7772 13.8672 12.7741 13.863 12.7697C13.826 12.7307 13.6958 12.5938 13.6159 12.4504C13.4791 12.2052 13.4412 11.9068 13.5599 11.602C13.6513 11.3672 13.82 11.1737 13.9758 11.0185L14.6371 10.3599C14.9112 10.087 15.3478 10.0672 15.6454 10.3142C15.765 10.4135 16.0204 10.5205 16.3848 10.596C16.7271 10.6668 17.067 10.6902 17.2606 10.6902C19.4668 10.6902 21.25 8.9098 21.25 6.72008C21.25 4.53036 19.4668 2.75 17.2606 2.75ZM13.1486 15.3763C13.1174 15.6615 13.0159 15.9669 12.7999 16.268L12.7948 16.2751L12.7895 16.2821C12.5219 16.6375 12.061 16.9687 11.5049 17.0752C11.1118 17.1505 10.6919 17.1088 10.2913 16.9147L9.96419 17.2405C9.51185 17.691 8.97167 17.7996 8.50691 17.7309C8.07947 17.6678 7.727 17.4603 7.51517 17.2795C7.50058 17.267 7.48647 17.254 7.47288 17.2405L6.81156 16.5819C6.32963 16.1019 6.18913 15.5381 6.27272 15.0266C6.34864 14.5622 6.598 14.195 6.81156 13.9823L12.1628 8.65293C12.14 8.59793 12.1168 8.53926 12.0937 8.47711C11.9339 8.04748 11.7711 7.4359 11.7711 6.72008C11.7711 3.69615 14.2317 1.25 17.2606 1.25C20.2894 1.25 22.75 3.69615 22.75 6.72008C22.75 9.74401 20.2894 12.1902 17.2606 12.1902C16.9765 12.1902 16.5339 12.1586 16.0807 12.0648C15.84 12.015 15.5614 11.9408 15.2909 11.8258L15.1456 11.9705C15.1844 12.0246 15.224 12.0862 15.2615 12.1554C15.2657 12.1619 15.2702 12.1689 15.2748 12.1764C15.2984 12.2144 15.3283 12.2655 15.3603 12.328C15.4235 12.4514 15.4998 12.6282 15.5514 12.8437C15.657 13.2855 15.6581 13.9075 15.2247 14.5117L15.2196 14.5188L15.2144 14.5258C14.9678 14.8532 14.5039 15.2511 13.8705 15.3713C13.6342 15.4161 13.392 15.4191 13.1486 15.3763ZM17.2606 5.82354C16.7588 5.82354 16.3573 6.22783 16.3573 6.72008C16.3573 7.21233 16.7588 7.61662 17.2606 7.61662C17.7623 7.61662 18.1639 7.21233 18.1639 6.72008C18.1639 6.22783 17.7623 5.82354 17.2606 5.82354ZM14.8573 6.72008C14.8573 5.39362 15.9362 4.32354 17.2606 4.32354C18.585 4.32354 19.6639 5.39362 19.6639 6.72008C19.6639 8.04654 18.585 9.11662 17.2606 9.11662C15.9362 9.11662 14.8573 8.04654 14.8573 6.72008Z"
                  fill="#1C274C"
                />
              </svg>
              Change Password
            </Link>
            <button onClick={handleLogout} className="dropdown-item-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <circle
                  cx="12"
                  cy="6"
                  r="4"
                  stroke="#1C274C"
                  stroke-width="1.5"
                />
                <path
                  d="M15.5 13.5351C14.4704 13.1948 13.275 13 12 13C8.13401 13 5 14.7909 5 17C5 17.3453 5 17.6804 5.02673 18M13 20.9867C12.6836 20.9955 12.3506 21 12 21C10.2776 21 8.97906 20.8916 8 20.6952"
                  stroke="#1C274C"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
                <path
                  d="M19.9502 17.0498L16.0502 20.9497"
                  stroke="#1C274C"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
                <circle
                  cx="18"
                  cy="19"
                  r="3"
                  stroke="#1C274C"
                  stroke-width="1.5"
                />
              </svg>
              Logout
            </button>
          </div>
        </div>
      </TooltipBlack>
     
    </nav>
  );
};

export default Navbar;
